(this["webpackJsonptour-agency-react"]=this["webpackJsonptour-agency-react"]||[]).push([[5],{123:function(e,t,r){"use strict";r(2),r(124),r(42);var a=r(23),i=r(30),n=r(1);t.a=function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(a.a,{show:e.errorModalShow,backdropClicked:e.errorModalClosed}),Object(n.jsx)(i.a,{mountOnEnter:!0,unmountOnExit:!0,in:e.errorModalShow,timeout:300,classNames:"show",children:Object(n.jsxs)("div",{className:"error-modal",children:[Object(n.jsx)("p",{className:"error-modal__title",children:"Error occured"}),Object(n.jsx)("p",{className:"error-modal__message",children:e.errorModalMsg}),Object(n.jsx)("button",{type:"button",className:"error-modal__btn",onClick:e.errorModalClosed,children:"OK"})]})})]})}},124:function(e,t,r){},125:function(e,t,r){"use strict";r(2),r(126);var a=r(1);t.a=function(){return Object(a.jsx)("div",{className:"spinner",children:"loading..."})}},126:function(e,t,r){},127:function(e,t,r){"use strict";r(2),r(128),r(42);var a=r(23),i=r(30),n=r(5),c=r(15),s=r(31),o=r(1);t.a=function(e){var t=Object(c.b)();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(a.a,{show:e.redirectModalShow,backdropClicked:e.redirectModalClosed}),Object(o.jsx)(i.a,{mountOnEnter:!0,unmountOnExit:!0,in:e.redirectModalShow,timeout:300,classNames:"show",children:Object(o.jsxs)("div",{className:"redirect-modal",children:[Object(o.jsx)("h3",{className:"redirect-modal__title",children:e.redirectModalTitle}),Object(o.jsxs)("div",{className:"redirect-modal__content",children:[Object(o.jsx)(n.b,{to:"/",onClick:e.redirectModalClosed,children:"go home"}),Object(o.jsx)(n.b,{to:"/your-page",onClick:e.redirectModalClosed,children:"go to your page"}),Object(o.jsx)(n.b,{to:"/tours",onClick:e.redirectModalClosed,children:"view tours"}),Object(o.jsx)(n.b,{to:"/leave-review",onClick:e.redirectModalClosed,children:"leave review"}),Object(o.jsx)(n.b,{to:"/request-tour",onClick:e.redirectModalClosed,children:"request tour"}),Object(o.jsx)("button",{className:"redirect-modal__logout",onClick:function(){t(s.r()),e.redirectModalClosed()},children:"logout"})]}),Object(o.jsx)("button",{className:"redirect-modal__btn",onClick:e.redirectModalClosed,children:"close"})]})})]})}},128:function(e,t,r){},129:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(16),i=r(2),n=function(){var e=Object(i.useState)(!1),t=Object(a.a)(e,2),r=t[0],n=t[1];return{redirectModalShow:r,showRedirectModal:function(){n(!0)},hideRedirectModal:function(){n(!1)}}}},130:function(e,t,r){"use strict";r(2),r(131);var a=r(1);t.a=function(e){return Object(a.jsxs)("form",{className:"form form__".concat(e.formClassname),children:[e.children,Object(a.jsx)("button",{type:"submit",className:"form__submit-btn",style:{display:e.signUpButtonShown?"none":"block"},disabled:!e.formIsValid,onClick:e.formSubmitHandler,children:e.formBtnText})]})}},131:function(e,t,r){},132:function(e,t,r){"use strict";var a=r(3),i=(r(2),r(133),r(160)),n=r(44),c=r(1);t.a=function(e){var t=e.elementType,r=e.elementConfig,s=e.inputChanged,o=e.inputUnfocused,l=e.value,u=e.disabledInfo,d=e.defaultValue,b=e.readOnly,j=e.shouldValidate,m=e.inputTouched,O=e.inputValid,f=e.inputWarning,h=e.inputWarningShown,C=e.inputWarningShowHandler,g=["generic-input__field"];j&&m&&O&&g.push("field-valid"),j&&m&&!O&&g.push("field-invalid");var p=null,v=["generic-input__message"];switch(h&&v.push("warning-shown"),t){case"inputText":p=Object(c.jsxs)("div",{className:"generic-input",children:[Object(c.jsxs)("div",{className:v.join(" "),children:[Object(c.jsx)("div",{className:"generic-input__message-icon",children:Object(c.jsx)(n.a,{})}),Object(c.jsx)("p",{className:"generic-input__message-text",children:f})]}),Object(c.jsx)("input",Object(a.a)(Object(a.a)({className:g.join(" ")},r.atributes),{},{value:l,readOnly:b,onChange:s,disabled:u,onBlur:o,onClick:C}))]});break;case"inputNumber":p=Object(c.jsxs)("div",{className:"generic-input",children:[Object(c.jsx)("label",{htmlFor:r.label.for,style:{display:r.label.show?"block":"none"},children:r.label.name}),Object(c.jsx)("input",Object(a.a)(Object(a.a)({className:g.join(" ")},r.atributes),{},{value:l,readOnly:b,onChange:s,disabled:u,onBlur:o,onClick:C}))]});break;case"textarea":p=Object(c.jsxs)("div",{className:"generic-input",children:[Object(c.jsx)("label",{htmlFor:r.label.for,children:r.label.name}),Object(c.jsx)("textarea",Object(a.a)(Object(a.a)({id:r.label.for},r.atributes),{},{value:l,className:g.join(" "),onChange:s,onBlur:o}))]});break;case"select":p=Object(c.jsxs)("div",{className:"generic-input ".concat(u&&"field-disabled"),children:[Object(c.jsx)("label",{htmlFor:r.label.for,children:r.label.name}),Object(c.jsxs)("select",{className:"generic-input__field",id:r.label.for,name:r.atributes.name,value:l||"default",onChange:s,disabled:u,children:[Object(c.jsx)("option",{value:"choose",hidden:!0,children:d}),r.options.map((function(e){return Object(c.jsx)("option",{value:e.name,children:e.name},Object(i.a)())}))]})]});break;default:p=Object(c.jsx)("input",{})}return p}},133:function(e,t,r){},146:function(e,t,r){},162:function(e,t,r){"use strict";r.r(t);var a=r(16),i=r(3),n=r(2),c=(r(146),r(139)),s=r.n(c),o=r(43),l=r(130),u=r(132),d=r(125),b=r(123),j=r(127),m=r(24),O=r(5),f=r(15),h=r(129),C=r(31),g=r(1),p=function(e,t){switch(t.type){case"COUNTRY_CHANGED":return Object(i.a)(Object(i.a)({},e),{},{requestForm:Object(i.a)(Object(i.a)({},e.requestForm),{},{countries:Object(i.a)(Object(i.a)({},e.requestForm.countries),{},{value:t.country,touched:t.touched,valid:t.countryIsValid}),cities:Object(i.a)(Object(i.a)({},e.requestForm.cities),{},{valid:t.cityIsValid})})});case"STATE_CHANGED":return Object(i.a)(Object(i.a)({},e),{},{requestForm:Object(i.a)(Object(i.a)({},e.requestForm),{},{states:Object(i.a)(Object(i.a)({},e.requestForm.states),{},{value:t.state})})});case"CITY_CHANGED":return Object(i.a)(Object(i.a)({},e),{},{requestForm:Object(i.a)(Object(i.a)({},e.requestForm),{},{cities:Object(i.a)(Object(i.a)({},e.requestForm.cities),{},{value:t.city,touched:t.touched,valid:t.valid})})});case"GET_STATES_BY_COUNTRY":return Object(i.a)(Object(i.a)({},e),{},{requestForm:Object(i.a)(Object(i.a)({},e.requestForm),{},{states:Object(i.a)(Object(i.a)({},e.requestForm.states),{},{elementConfig:Object(i.a)(Object(i.a)({},e.requestForm.states.elementConfig),{},{options:t.states}),disabled:!1}),cities:Object(i.a)(Object(i.a)({},e.requestForm.cities),{},{elementConfig:Object(i.a)(Object(i.a)({},e.requestForm.cities.elementConfig),{},{options:[]}),disabled:!0,valid:t.cityIsValid})})});case"GET_CITIES_BY_COUNTRY":return Object(i.a)(Object(i.a)({},e),{},{requestForm:Object(i.a)(Object(i.a)({},e.requestForm),{},{states:Object(i.a)(Object(i.a)({},e.requestForm.states),{},{elementConfig:Object(i.a)(Object(i.a)({},e.requestForm.states.elementConfig),{},{options:[]}),disabled:!0}),cities:Object(i.a)(Object(i.a)({},e.requestForm.cities),{},{elementConfig:Object(i.a)(Object(i.a)({},e.requestForm.cities.elementConfig),{},{options:t.cities}),disabled:!1,valid:t.cityIsValid,defaultValue:t.defaultValue})})});case"GET_CITIES_BY_STATE":return Object(i.a)(Object(i.a)({},e),{},{requestForm:Object(i.a)(Object(i.a)({},e.requestForm),{},{cities:Object(i.a)(Object(i.a)({},e.requestForm.cities),{},{elementConfig:Object(i.a)(Object(i.a)({},e.requestForm.cities.elementConfig),{},{options:t.cities}),disabled:!1,valid:t.valid,defaultValue:t.defaultValue})})});case"CLEAR_INPUT_FIELDS":return Object(i.a)(Object(i.a)({},e),{},{requestForm:Object(i.a)(Object(i.a)({},e.requestForm),{},{countries:Object(i.a)(Object(i.a)({},e.requestForm.countries),{},{value:"",touched:!1,valid:!1}),states:Object(i.a)(Object(i.a)({},e.requestForm.states),{},{value:"",touched:!1}),cities:Object(i.a)(Object(i.a)({},e.requestForm.cities),{},{value:"",touched:!1,valid:!1})})});case"FORM_VALIDITY":return Object(i.a)(Object(i.a)({},e),{},{formIsValid:t.formIsValid});case"INVALIDATE_FORM":return Object(i.a)(Object(i.a)({},e),{},{formIsValid:!1});default:return e}};t.default=function(e){var t=Object(f.b)(),r=s.a.getAllCountries(),i=s.a.getAllStates(),c=Object(f.c)((function(e){return e.auth.token})),v=Object(f.c)((function(e){return e.auth.userID})),y=Object(f.c)((function(e){return e.requestTour.loading})),x=Object(f.c)((function(e){return e.requestTour.error})),q=Object(h.a)(),_=q.redirectModalShow,F=q.showRedirectModal,T=q.hideRedirectModal,N=function(e,t){var r=!0;return!e.required||(e.required&&(r=""!==t.trim()&&r),r)},I=Object(n.useReducer)(p,{requestForm:{countries:{id:"countries",elementType:"select",elementConfig:{label:{for:"countries",name:"Choose Country: "},atributes:{name:"countries"},options:r},value:"",defaultValue:"your country",disabled:!1,onChangeHandler:function(e){var t,a,i,n=r.find((function(t){return t.name===e})).isoCode,c=N(E.requestForm.countries.validation,e),o=!1;(w({type:"COUNTRY_CHANGED",country:e,touched:!0,countryIsValid:c,cityIsValid:o}),"United States"===e)?(t=s.a.getStatesOfCountry(n),w({type:"GET_STATES_BY_COUNTRY",states:t,cityIsValid:o})):(0===(a=s.a.getCitiesOfCountry(n)).length?(o=!0,i="no cities for current country"):(o=!1,i="your city"),w({type:"GET_CITIES_BY_COUNTRY",cities:a,cityIsValid:o,defaultValue:i}))},validation:{required:!0},touched:!1,valid:!1},states:{id:"states",elementType:"select",elementConfig:{label:{for:"states",name:"Choose State: "},atributes:{name:"states"},options:[]},value:"",defaultValue:"your state",disabled:!0,onChangeHandler:function(e){var t,r,a=i.find((function(t){return t.name===e})),n=a.isoCode,c=a.countryCode,o=s.a.getCitiesOfState(c,n);w({type:"STATE_CHANGED",state:e}),0===o.length?(t=!0,r="no cities for current state"):(t=!1,r="your city"),w({type:"GET_CITIES_BY_STATE",cities:o,valid:t,defaultValue:r})},validation:{required:!1},touched:!1,valid:!0},cities:{id:"cities",elementType:"select",elementConfig:{label:{for:"cities",name:"Choose City: "},atributes:{name:"cities"},options:[]},value:"",defaultValue:"your city",disabled:!0,onChangeHandler:function(e){var t=N(E.requestForm.countries.validation,e);w({type:"CITY_CHANGED",city:e,touched:!0,valid:t})},validation:{required:!0},touched:!1,valid:!1}},formIsValid:!1}),S=Object(a.a)(I,2),E=S[0],w=S[1];Object(n.useEffect)((function(){var e=!1,t=[];for(var r in E.requestForm)t.push(E.requestForm[r].valid);t.forEach((function(t){e=!0===t})),w({type:"FORM_VALIDITY",formIsValid:e})}),[E.requestForm]),Object(n.useEffect)((function(){null!==x&&(T(),w({type:"INVALIDATE_FORM"}))}),[x]);var M=[];for(var V in E.requestForm)M.push({id:V,config:E.requestForm[V]});var k;return c&&(k=Object(g.jsx)(l.a,{formClassname:"request-tour",formBtnText:"send request",formIsValid:E.formIsValid,formSubmitHandler:function(e){e.preventDefault();var r=s.a.getAllCountries().find((function(e){return e.name===E.requestForm.countries.value})).isoCode;a={country:E.requestForm.countries.value,state:E.requestForm.states.value,city:E.requestForm.cities.value,code:r,userId:v},i=c,t(C.v(a,i)),w({type:"CLEAR_INPUT_FIELDS"}),F();var a,i},children:M.map((function(e){var t=e.id,r=e.config,a=r.elementType,i=r.elementConfig,n=r.value,c=r.disabled,s=r.onChangeHandler,o=r.defaultValue;return Object(g.jsx)(u.a,{elementType:a,elementConfig:i,value:n,disabledInfo:c,defaultValue:o,inputChanged:function(e){return s(e.target.value)}},t)}))})),null===c&&(k=Object(g.jsxs)("div",{style:{textAlign:"center",paddingBottom:"2rem"},children:[Object(g.jsx)("p",{style:{fontSize:"2.5rem",marginBottom:"2rem"},children:"You need to sign up in order to request a tour"}),Object(g.jsx)(O.b,{to:"/signup",style:{backgroundColor:"lightblue",width:"15rem",margin:"0 auto",fontSize:"1.8rem",padding:"0.7rem 0",color:"white",fontWeight:"bold",borderRadius:"0.5rem"},children:"Sign up"})]})),y&&(k=Object(g.jsx)(d.a,{})),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(o.a,{titleClassname:"require-tour",icon:Object(g.jsx)(m.e,{}),titleText:"request tour",titleAdditional:"choose your destination"}),Object(g.jsx)(j.a,{redirectModalShow:_,redirectModalClosed:T,redirectModalTitle:"tour request successful"}),Object(g.jsx)(b.a,{errorModalShow:null!==x,errorModalClosed:function(){return t(C.u())},errorModalMsg:"Something went wrong. Refresh the page and try again."}),Object(g.jsxs)("section",{className:"request-tour__content",children:[Object(g.jsxs)("p",{className:"request-tour__text",children:["Choose where would you like to travel. Select prefered country, state and city, fill the form and send us the request. After you are done, you can come back and request more. You can check your request, along with your past, present and future touring history ",Object(g.jsx)(O.b,{to:"/your-page",style:{display:"inline-block",color:"red",textDecoration:"underline"},children:"here"}),".",Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("span",{style:{color:"red"},children:"NOTE: "}),"choosing state is required ONLY if country is United States."]}),Object(g.jsxs)("article",{className:"request-tour__request",children:[Object(g.jsx)("h3",{className:"request-tour__request-title",children:"request your tour here"}),k]})]})]})}}}]);
//# sourceMappingURL=5.31688a29.chunk.js.map