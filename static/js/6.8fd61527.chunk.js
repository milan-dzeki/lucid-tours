(this["webpackJsonptour-agency-react"]=this["webpackJsonptour-agency-react"]||[]).push([[6],{123:function(e,t,n){"use strict";n(2),n(124),n(42);var i=n(23),a=n(30),o=n(1);t.a=function(e){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(i.a,{show:e.errorModalShow,backdropClicked:e.errorModalClosed}),Object(o.jsx)(a.a,{mountOnEnter:!0,unmountOnExit:!0,in:e.errorModalShow,timeout:300,classNames:"show",children:Object(o.jsxs)("div",{className:"error-modal",children:[Object(o.jsx)("p",{className:"error-modal__title",children:"Error occured"}),Object(o.jsx)("p",{className:"error-modal__message",children:e.errorModalMsg}),Object(o.jsx)("button",{type:"button",className:"error-modal__btn",onClick:e.errorModalClosed,children:"OK"})]})})]})}},124:function(e,t,n){},125:function(e,t,n){"use strict";n(2),n(126);var i=n(1);t.a=function(){return Object(i.jsx)("div",{className:"spinner",children:"loading..."})}},126:function(e,t,n){},127:function(e,t,n){"use strict";n(2),n(128),n(42);var i=n(23),a=n(30),o=n(5),l=n(15),r=n(31),s=n(1);t.a=function(e){var t=Object(l.b)();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(i.a,{show:e.redirectModalShow,backdropClicked:e.redirectModalClosed}),Object(s.jsx)(a.a,{mountOnEnter:!0,unmountOnExit:!0,in:e.redirectModalShow,timeout:300,classNames:"show",children:Object(s.jsxs)("div",{className:"redirect-modal",children:[Object(s.jsx)("h3",{className:"redirect-modal__title",children:e.redirectModalTitle}),Object(s.jsxs)("div",{className:"redirect-modal__content",children:[Object(s.jsx)(o.b,{to:"/",onClick:e.redirectModalClosed,children:"go home"}),Object(s.jsx)(o.b,{to:"/your-page",onClick:e.redirectModalClosed,children:"go to your page"}),Object(s.jsx)(o.b,{to:"/tours",onClick:e.redirectModalClosed,children:"view tours"}),Object(s.jsx)(o.b,{to:"/leave-review",onClick:e.redirectModalClosed,children:"leave review"}),Object(s.jsx)(o.b,{to:"/request-tour",onClick:e.redirectModalClosed,children:"request tour"}),Object(s.jsx)("button",{className:"redirect-modal__logout",onClick:function(){t(r.r()),e.redirectModalClosed()},children:"logout"})]}),Object(s.jsx)("button",{className:"redirect-modal__btn",onClick:e.redirectModalClosed,children:"close"})]})})]})}},128:function(e,t,n){},129:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(16),a=n(2),o=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],o=t[1];return{redirectModalShow:n,showRedirectModal:function(){o(!0)},hideRedirectModal:function(){o(!1)}}}},130:function(e,t,n){"use strict";n(2),n(131);var i=n(1);t.a=function(e){return Object(i.jsxs)("form",{className:"form form__".concat(e.formClassname),children:[e.children,Object(i.jsx)("button",{type:"submit",className:"form__submit-btn",style:{display:e.signUpButtonShown?"none":"block"},disabled:!e.formIsValid,onClick:e.formSubmitHandler,children:e.formBtnText})]})}},131:function(e,t,n){},132:function(e,t,n){"use strict";var i=n(3),a=(n(2),n(133),n(160)),o=n(44),l=n(1);t.a=function(e){var t=e.elementType,n=e.elementConfig,r=e.inputChanged,s=e.inputUnfocused,c=e.value,u=e.disabledInfo,d=e.defaultValue,b=e.readOnly,m=e.shouldValidate,j=e.inputTouched,h=e.inputValid,f=e.inputWarning,p=e.inputWarningShown,g=e.inputWarningShowHandler,O=["generic-input__field"];m&&j&&h&&O.push("field-valid"),m&&j&&!h&&O.push("field-invalid");var v=null,x=["generic-input__message"];switch(p&&x.push("warning-shown"),t){case"inputText":v=Object(l.jsxs)("div",{className:"generic-input",children:[Object(l.jsxs)("div",{className:x.join(" "),children:[Object(l.jsx)("div",{className:"generic-input__message-icon",children:Object(l.jsx)(o.a,{})}),Object(l.jsx)("p",{className:"generic-input__message-text",children:f})]}),Object(l.jsx)("input",Object(i.a)(Object(i.a)({className:O.join(" ")},n.atributes),{},{value:c,readOnly:b,onChange:r,disabled:u,onBlur:s,onClick:g}))]});break;case"inputNumber":v=Object(l.jsxs)("div",{className:"generic-input",children:[Object(l.jsx)("label",{htmlFor:n.label.for,style:{display:n.label.show?"block":"none"},children:n.label.name}),Object(l.jsx)("input",Object(i.a)(Object(i.a)({className:O.join(" ")},n.atributes),{},{value:c,readOnly:b,onChange:r,disabled:u,onBlur:s,onClick:g}))]});break;case"textarea":v=Object(l.jsxs)("div",{className:"generic-input",children:[Object(l.jsx)("label",{htmlFor:n.label.for,children:n.label.name}),Object(l.jsx)("textarea",Object(i.a)(Object(i.a)({id:n.label.for},n.atributes),{},{value:c,className:O.join(" "),onChange:r,onBlur:s}))]});break;case"select":v=Object(l.jsxs)("div",{className:"generic-input ".concat(u&&"field-disabled"),children:[Object(l.jsx)("label",{htmlFor:n.label.for,children:n.label.name}),Object(l.jsxs)("select",{className:"generic-input__field",id:n.label.for,name:n.atributes.name,value:c||"default",onChange:r,disabled:u,children:[Object(l.jsx)("option",{value:"choose",hidden:!0,children:d}),n.options.map((function(e){return Object(l.jsx)("option",{value:e.name,children:e.name},Object(a.a)())}))]})]});break;default:v=Object(l.jsx)("input",{})}return v}},133:function(e,t,n){},140:function(e,t,n){},169:function(e,t,n){"use strict";n.r(t);var i=n(45),a=n(3),o=n(16),l=n(2),r=n(15),s=(n(140),n(5)),c=n(43),u=n(130),d=n(132),b=n(46),m=n(123),j=n(127),h=n(125),f=n(129),p=n(47),g=n(52),O=n.p+"static/media/book-tour.0fc973df.jpg",v=n.p+"static/media/request-tour.e48b4b2a.jpg",x=n.p+"static/media/review.f1a6bd05.jpg",w=n(21),_=n(26),y=n(1),C=[{id:"signup-book",title:"book your tour from home",titleIcon:Object(y.jsx)(w.a,{}),image:O,text:"Book your tour from the comfort of your home right now.",link:"/tours",linkName:"see tours"},{id:"signup-request",title:"request tour according to your wishes",titleIcon:Object(y.jsx)(g.a,{}),image:v,text:"Tell us where would you like to travel. Request the destination and we'll see what we can do.",link:"/request-tour",linkName:"request a tour"},{id:"signup-review",title:"leave a review",titleIcon:Object(y.jsx)(_.b,{}),image:x,text:"What are your experiences from traveling with us? Leave your comment.",link:"/leave-review",linkName:"leave review"}],N=n(139),T=n.n(N),k=n(31);t.default=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.auth.token})),n=Object(r.c)((function(e){return e.auth.error})),O=Object(r.c)((function(e){return e.auth.loading})),v=Object(r.c)((function(e){return e.auth.authSuccess})),x=function(t,n){return e(k.a(t,n))},w=Object(p.a)(),_=w.questionModalData,N=w.showQuestionModal,M=w.closeQuestionModal,S=Object(f.a)(),q=S.redirectModalShow,E=S.showRedirectModal,V=S.hideRedirectModal;Object(l.useEffect)((function(){null===n&&v&&E()}),[n,v]);var I=T.a.getCitiesOfCountry("RS"),W=Object(l.useState)("signup"),L=Object(o.a)(W,2),P=L[0],z=L[1],B=Object(l.useState)({firstName:{elementType:"inputText",elementConfig:{label:{for:null},atributes:{type:"text",name:"firstName",placeholder:"First Name"}},value:"",validation:{required:!0},disabled:!1,touched:!1,valid:!1},lastName:{elementType:"inputText",elementConfig:{label:{for:null},atributes:{type:"text",name:"lastName",placeholder:"Last Name"}},value:"",validation:{required:!0},disabled:!1,touched:!1,valid:!1},country:{elementType:"inputText",elementConfig:{label:{for:null},atributes:{type:"text",name:"country",placeholder:"Country"}},value:"Serbia",validation:{required:!0},disabled:!1,readOnly:!0,touched:!0,valid:!0,warningText:"We only operate from Serbia, for now",warningTextShown:!1},city:{elementType:"select",elementConfig:{label:{for:null},atributes:{name:"city",placeholder:"City"},options:I},value:"",defaultValue:"Choose city",validation:{required:!0},disabled:!1,touched:!1,valid:!1},phone:{elementType:"inputText",elementConfig:{label:{for:null},atributes:{type:"tel",name:"phone",placeholder:"Phone"}},value:"00381",validation:{required:!0,initialValue:"00381",minLength:"00381".length+8,isPhone:!0},disabled:!1,touched:!1,valid:!1,warningText:"Must start with serbian code - 00381",warningTextShown:!1},email:{elementType:"inputText",elementConfig:{label:{for:null},atributes:{type:"email",name:"email",placeholder:"Email"}},value:"",validation:{required:!0,isEmail:!0},disabled:!1,touched:!1,valid:!1},password:{elementType:"inputText",elementConfig:{label:{for:null},atributes:{type:"password",name:"password",placeholder:"Password"}},value:"",validation:{required:!0,minLength:6},disabled:!1,touched:!1,valid:!1},confirmPassword:{elementType:"inputText",elementConfig:{label:{for:null},atributes:{type:"password",name:"confirmPassword",placeholder:"Confirm Password"}},value:"",validation:{required:!0,passwordRequired:!0},disabled:!0,touched:!1,valid:!1}}),R=Object(o.a)(B,2),A=R[0],F=R[1],D=Object(l.useState)({email:{elementType:"inputText",elementConfig:{label:{for:null},atributes:{type:"email",name:"email",placeholder:"Email"}},value:"",validation:{required:!0,isEmail:!0},disabled:!1,touched:!1,valid:!1},password:{elementType:"inputText",elementConfig:{label:{for:null},atributes:{type:"password",name:"password",placeholder:"Password"}},value:"",validation:{required:!0,minLength:6},disabled:!1,touched:!1,valid:!1}}),U=Object(o.a)(D,2),H=U[0],J=U[1],Q=Object(l.useState)(!1),$=Object(o.a)(Q,2),K=$[0],X=$[1],Y=Object(l.useState)(!1),G=Object(o.a)(Y,2),Z=G[0],ee=G[1],te=function(e,t){var n=!0;if(!e)return!0;if(e.required&&(n=""!==t.trim()&&n),e.isEmail){n=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(t)&&""!==t.trim()&&n}return e.minLength&&(n=t.length>=e.minLength&&n),e.initialValue&&(n=t.includes(e.initialValue)&&n),e.isPhone&&(n=!isNaN(t.slice(5))&&n),e.passwordRequired&&(n=""!==A.password.value.trim()&&t===A.password.value&&n),n};Object(l.useEffect)((function(){var e;e=!A.password.valid,F((function(t){return Object(a.a)(Object(a.a)({},t),{},{confirmPassword:Object(a.a)(Object(a.a)({},t.confirmPassword),{},{disabled:e})})}))}),[A.password.valid]);var ne=function(e,t){var n=[];for(var i in e)n.push(e[i].valid);n.includes(!1)?t(!1):t(!0)};Object(l.useEffect)((function(){ne(A,X)}),[A]),Object(l.useEffect)((function(){ne(H,ee)}),[H]);var ie=[];for(var ae in A)ie.push({id:ae,config:A[ae]});var oe=[];for(var le in H)oe.push({id:le,config:H[le]});var re,se,ce,ue,de,be=function(e,t){return e.map((function(e){var n=e.id,o=e.config,l=o.elementType,r=o.elementConfig,s=o.value,c=o.defaultValue,u=o.disabled,b=o.readOnly,m=o.touched,j=o.valid,h=o.validation,f=o.warningText,p=o.warningTextShown;return Object(y.jsx)(d.a,{elementType:l,elementConfig:r,value:s,defaultValue:c,disabledInfo:u,readOnly:b,shouldValidate:h.required,inputTouched:m,inputValid:j,inputWarning:f,inputWarningShown:p,inputWarningShowHandler:function(){return function(e){"country"!==e&&"phone"!==e||(F((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(i.a)({},e,Object(a.a)(Object(a.a)({},t[e]),{},{warningTextShown:!0})))})),setTimeout((function(){F((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(i.a)({},e,Object(a.a)(Object(a.a)({},t[e]),{},{warningTextShown:!1})))}))}),2e3))}(e.id)},inputChanged:function(n){return t(n,e.id)},inputUnfocused:function(){return function(e){"signup"===P&&F((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(i.a)({},e,Object(a.a)(Object(a.a)({},t[e]),{},{touched:!0})))})),"login"===P&&J((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(i.a)({},e,Object(a.a)(Object(a.a)({},t[e]),{},{touched:!0})))}))}(e.id)}},n)}))};"signup"!==P||t?"login"!==P||t?t&&(re=Object(y.jsxs)("div",{style:{width:"90%",margin:"0 auto",textAlign:"center"},children:[Object(y.jsx)("p",{style:{fontSize:"3.5rem",fontWeight:"bold",marginBottom:"2rem"},children:"You are logged in"}),Object(y.jsx)("button",{type:"button",style:{fontSize:"1.9rem",fontWeight:"bold",padding:"1rem 0",width:"15rem",outline:"none",border:"none",backgroundColor:"salmon",color:"white",cursor:"pointer"},onClick:function(){return N("logging out","Are you sure you want to log out?")},children:"Log out"})]})):(re=be(oe,(function(e,t){J((function(n){return Object(a.a)(Object(a.a)({},n),{},Object(i.a)({},t,Object(a.a)(Object(a.a)({},n[t]),{},{value:e.target.value,touched:!0,valid:te(n[t].validation,e.target.value)})))}))})),se="log in",ce="Don't have an account?",ue="sign up",de=Z):(re=be(ie,(function(e,t){F((function(n){return Object(a.a)(Object(a.a)({},n),{},Object(i.a)({},t,Object(a.a)(Object(a.a)({},n[t]),{},{value:e.target.value,touched:!0,valid:te(n[t].validation,e.target.value)})))}))})),se="sign up",ce="Already have an account?",ue="log in",de=K);var me=Object(y.jsx)(u.a,{formClassname:"signup",formIsValid:de,formBtnText:"signup"===P?"sign up":"log in",signUpButtonShown:t,formSubmitHandler:function(e){e.preventDefault(),x("signup"===P?A:H,P)},children:re});return O&&(me=Object(y.jsx)(h.a,{})),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(j.a,{redirectModalShow:q,redirectModalClosed:function(){e(k.e()),V()},redirectModalTitle:"you are logged in"}),Object(y.jsx)(b.a,{questionModalShow:_.show,questionModalTitle:_.title,questionModalText:_.text,questionModalCancel:M,questionModalConfirm:function(){e(k.r()),M()}}),Object(y.jsx)(m.a,{errorModalShow:null!==n,errorModalMsg:function(){var e="Something went wrong. Try different email or password.";return n&&"EMAIL_NOT_FOUND"===n.message&&(e="Email doesn't exist in out database. Try again of try signing up."),n&&"INVALID_PASSWORD"===n.message&&(e="Wrong password entered."),n&&"EMAIL_EXISTS"===n.message&&(e="Email that you entered is already registered in our database. Try with another one, or simply log in."),e}(),errorModalClosed:function(){return e(k.g())}}),Object(y.jsx)(c.a,{titleClassname:"signup",icon:Object(y.jsx)(g.b,{}),titleText:"sign up",titleAdditional:"...or log in"}),Object(y.jsxs)("section",{className:"signup__content",children:[Object(y.jsxs)("article",{className:"signup__info",children:[Object(y.jsx)("h3",{className:"signup__info-title",children:"after you become our member you can:"}),Object(y.jsx)("ul",{className:"signup__info-list",children:C.map((function(e){var t=e.id,n=e.title,i=e.titleIcon,a=e.image,o=e.text,l=e.link,r=e.linkName;return Object(y.jsxs)("li",{className:"signup__info-item",children:[Object(y.jsxs)("div",{className:"signup__info-item__title",children:[Object(y.jsx)("div",{className:"signup__info-item__icon",children:i}),Object(y.jsx)("p",{className:"signup__info-item__title-text",children:n})]}),Object(y.jsxs)("div",{className:"signup__info-item__main",children:[Object(y.jsxs)("div",{className:"signup__info-item__main-info",children:[Object(y.jsx)("p",{className:"signup__info-item__main-text",children:o}),Object(y.jsx)(s.b,{className:"signup__info-item__link",to:l,children:r})]}),Object(y.jsx)("img",{className:"signup__info-item__main-img",src:a,alt:t})]})]},t)}))})]}),Object(y.jsxs)("article",{className:"signup__form",children:[Object(y.jsxs)("h3",{className:"signup__form-title",style:{display:t?"none":"block"},children:["enter your info to ",se]}),me,Object(y.jsx)("p",{className:"signup__form-check",style:{display:t?"none":"block"},children:ce}),Object(y.jsxs)("button",{type:"button",className:"signup__form-switch",style:{display:t?"none":"block"},onClick:function(){"signup"===P&&z("login"),"login"===P&&z("signup")},children:["switch to ",ue]})]})]})]})}}}]);
//# sourceMappingURL=6.8fd61527.chunk.js.map