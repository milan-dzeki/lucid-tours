(this["webpackJsonptour-agency-react"]=this["webpackJsonptour-agency-react"]||[]).push([[4],{123:function(e,t,a){"use strict";a(2),a(124),a(42);var n=a(23),r=a(30),i=a(1);t.a=function(e){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(n.a,{show:e.errorModalShow,backdropClicked:e.errorModalClosed}),Object(i.jsx)(r.a,{mountOnEnter:!0,unmountOnExit:!0,in:e.errorModalShow,timeout:300,classNames:"show",children:Object(i.jsxs)("div",{className:"error-modal",children:[Object(i.jsx)("p",{className:"error-modal__title",children:"Error occured"}),Object(i.jsx)("p",{className:"error-modal__message",children:e.errorModalMsg}),Object(i.jsx)("button",{type:"button",className:"error-modal__btn",onClick:e.errorModalClosed,children:"OK"})]})})]})}},124:function(e,t,a){},125:function(e,t,a){"use strict";a(2),a(126);var n=a(1);t.a=function(){return Object(n.jsx)("div",{className:"spinner",children:"loading..."})}},126:function(e,t,a){},127:function(e,t,a){"use strict";a(2),a(128),a(42);var n=a(23),r=a(30),i=a(5),l=a(15),o=a(31),c=a(1);t.a=function(e){var t=Object(l.b)();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(n.a,{show:e.redirectModalShow,backdropClicked:e.redirectModalClosed}),Object(c.jsx)(r.a,{mountOnEnter:!0,unmountOnExit:!0,in:e.redirectModalShow,timeout:300,classNames:"show",children:Object(c.jsxs)("div",{className:"redirect-modal",children:[Object(c.jsx)("h3",{className:"redirect-modal__title",children:e.redirectModalTitle}),Object(c.jsxs)("div",{className:"redirect-modal__content",children:[Object(c.jsx)(i.b,{to:"/",onClick:e.redirectModalClosed,children:"go home"}),Object(c.jsx)(i.b,{to:"/your-page",onClick:e.redirectModalClosed,children:"go to your page"}),Object(c.jsx)(i.b,{to:"/tours",onClick:e.redirectModalClosed,children:"view tours"}),Object(c.jsx)(i.b,{to:"/leave-review",onClick:e.redirectModalClosed,children:"leave review"}),Object(c.jsx)(i.b,{to:"/request-tour",onClick:e.redirectModalClosed,children:"request tour"}),Object(c.jsx)("button",{className:"redirect-modal__logout",onClick:function(){t(o.r()),e.redirectModalClosed()},children:"logout"})]}),Object(c.jsx)("button",{className:"redirect-modal__btn",onClick:e.redirectModalClosed,children:"close"})]})})]})}},128:function(e,t,a){},129:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(16),r=a(2),i=function(){var e=Object(r.useState)(!1),t=Object(n.a)(e,2),a=t[0],i=t[1];return{redirectModalShow:a,showRedirectModal:function(){i(!0)},hideRedirectModal:function(){i(!1)}}}},130:function(e,t,a){"use strict";a(2),a(131);var n=a(1);t.a=function(e){return Object(n.jsxs)("form",{className:"form form__".concat(e.formClassname),children:[e.children,Object(n.jsx)("button",{type:"submit",className:"form__submit-btn",style:{display:e.signUpButtonShown?"none":"block"},disabled:!e.formIsValid,onClick:e.formSubmitHandler,children:e.formBtnText})]})}},131:function(e,t,a){},132:function(e,t,a){"use strict";var n=a(3),r=(a(2),a(133),a(160)),i=a(44),l=a(1);t.a=function(e){var t=e.elementType,a=e.elementConfig,o=e.inputChanged,c=e.inputUnfocused,u=e.value,s=e.disabledInfo,d=e.defaultValue,b=e.readOnly,v=e.shouldValidate,j=e.inputTouched,m=e.inputValid,f=e.inputWarning,h=e.inputWarningShown,p=e.inputWarningShowHandler,O=["generic-input__field"];v&&j&&m&&O.push("field-valid"),v&&j&&!m&&O.push("field-invalid");var g=null,w=["generic-input__message"];switch(h&&w.push("warning-shown"),t){case"inputText":g=Object(l.jsxs)("div",{className:"generic-input",children:[Object(l.jsxs)("div",{className:w.join(" "),children:[Object(l.jsx)("div",{className:"generic-input__message-icon",children:Object(l.jsx)(i.a,{})}),Object(l.jsx)("p",{className:"generic-input__message-text",children:f})]}),Object(l.jsx)("input",Object(n.a)(Object(n.a)({className:O.join(" ")},a.atributes),{},{value:u,readOnly:b,onChange:o,disabled:s,onBlur:c,onClick:p}))]});break;case"inputNumber":g=Object(l.jsxs)("div",{className:"generic-input",children:[Object(l.jsx)("label",{htmlFor:a.label.for,style:{display:a.label.show?"block":"none"},children:a.label.name}),Object(l.jsx)("input",Object(n.a)(Object(n.a)({className:O.join(" ")},a.atributes),{},{value:u,readOnly:b,onChange:o,disabled:s,onBlur:c,onClick:p}))]});break;case"textarea":g=Object(l.jsxs)("div",{className:"generic-input",children:[Object(l.jsx)("label",{htmlFor:a.label.for,children:a.label.name}),Object(l.jsx)("textarea",Object(n.a)(Object(n.a)({id:a.label.for},a.atributes),{},{value:u,className:O.join(" "),onChange:o,onBlur:c}))]});break;case"select":g=Object(l.jsxs)("div",{className:"generic-input ".concat(s&&"field-disabled"),children:[Object(l.jsx)("label",{htmlFor:a.label.for,children:a.label.name}),Object(l.jsxs)("select",{className:"generic-input__field",id:a.label.for,name:a.atributes.name,value:u||"default",onChange:o,disabled:s,children:[Object(l.jsx)("option",{value:"choose",hidden:!0,children:d}),a.options.map((function(e){return Object(l.jsx)("option",{value:e.name,children:e.name},Object(r.a)())}))]})]});break;default:g=Object(l.jsx)("input",{})}return g}},133:function(e,t,a){},148:function(e,t,a){},160:function(e,t,a){"use strict";var n,r=new Uint8Array(16);function i(){if(!n&&!(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)}var l=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var o=function(e){return"string"===typeof e&&l.test(e)},c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!o(a))throw TypeError("Stringified UUID is invalid");return a};t.a=function(e,t,a){var n=(e=e||{}).random||(e.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){a=a||0;for(var r=0;r<16;++r)t[a+r]=n[r];return t}return s(n)}},164:function(e,t,a){"use strict";a.r(t);var n=a(45),r=a(3),i=a(35),l=a(16),o=a(2),c=(a(148),a(5)),u=a(43),s=a(33),d=a(130),b=a(132),v=a(125),j=a(123),m=a(127),f=a(15),h=a(129),p=a(31),O=a(1);t.default=function(){var e=Object(f.b)(),t=Object(f.c)((function(e){return e.auth.token})),a=Object(f.c)((function(e){return e.auth.userID})),g=Object(o.useCallback)((function(t,a){return e(p.k(t,a))}),[e]);Object(o.useEffect)((function(){g(t,a)}),[g,t,a]);var w=Object(f.c)((function(e){return e.reviews.agencyReview})),x=Object(o.useState)(!1),y=Object(l.a)(x,2),C=y[0],_=y[1];Object(o.useEffect)((function(){_(null!==w)}),[w]);var T=Object(o.useState)(!1),N=Object(l.a)(T,2),k=N[0],M=N[1],R=Object(h.a)(),S=R.redirectModalShow,V=R.showRedirectModal,q=R.hideRedirectModal,E=Object(f.c)((function(e){return e.reviews.sendReviewLoading})),I=Object(f.c)((function(e){return e.reviews.sendReviewError})),F=function(t,a,n){return e(p.p(t,a,n))},B=Object(f.c)((function(e){return e.tours.tours})),U=Object(i.a)(new Set(B.map((function(e){return e.state})))).map((function(e){return{name:e}})),Y=Object(o.useState)({name:{elementType:"inputText",elementConfig:{label:{for:null},atributes:{type:"text",name:"name",placeholder:"Choose Name"}},value:"",validation:{required:!0},disabled:!1,touched:!1,valid:!1},job:{elementType:"inputText",elementConfig:{label:{for:null},atributes:{type:"text",name:"job",placeholder:"Your Job"}},value:"",validation:{required:!0},disabled:!1,touched:!1,valid:!1},travel1:{id:"travel1",elementType:"select",elementConfig:{label:{for:"travel1",name:"Choose top 3 destinations"},atributes:{name:"travel1"},options:U},value:"",defaultValue:"country",validation:{required:!0},disabled:!1,touched:!1,valid:!1},travel2:{id:"travel2",elementType:"select",elementConfig:{label:{for:"",name:""},atributes:{name:"travel2"},options:U},value:"",defaultValue:"country",validation:{required:!1},disabled:!1,touched:!1,valid:!0},travel3:{id:"travel3",elementType:"select",elementConfig:{label:{for:"",name:""},atributes:{name:"travel3"},options:U},value:"",defaultValue:"country",validation:{required:!1},disabled:!1,touched:!1,valid:!0},reviewText:{elementType:"textarea",elementConfig:{label:{for:"review",name:"Leave Your review here..."},atributes:{name:"review"}},value:"",validation:{required:!0},disabled:!1,touched:!1,valid:!1},rating:{elementType:"inputNumber",elementConfig:{label:{show:!0,for:"rating",name:"Rate our agency (with numbers 1 - 5)"},atributes:{type:"number",name:"rating",placeholder:"",min:"1",max:"5"}},value:"",validation:{required:!0,minValue:1,maxValue:5},disabled:!1,touched:!1,valid:!1}}),L=Object(l.a)(Y,2),A=L[0],J=L[1],D=Object(o.useState)({name:{elementType:"inputText",elementConfig:{label:{for:null},atributes:{type:"text",name:"name",placeholder:"Choose Name"}},value:"",validation:{required:!0},disabled:!1,touched:!1,valid:!1},job:{elementType:"inputText",elementConfig:{label:{for:null},atributes:{type:"text",name:"job",placeholder:"Your Job"}},value:"",validation:{required:!0},disabled:!1,touched:!1,valid:!1},travel:{id:"travel",elementType:"select",elementConfig:{label:{for:"travel",name:"Choose tour"},atributes:{name:"travel"},options:U},value:"",defaultValue:"country",validation:{required:!0},disabled:!1,touched:!1,valid:!1},reviewText:{elementType:"textarea",elementConfig:{label:{for:"review",name:"Leave Your review here..."},atributes:{name:"review"}},value:"",validation:{required:!0},disabled:!1,touched:!1,valid:!1},rating:{elementType:"inputNumber",elementConfig:{label:{show:!0,for:"rating",name:"Rate selected tour (with numbers 1 - 5)"},atributes:{type:"number",name:"rating",placeholder:"",min:"1",max:"5"}},value:"",validation:{required:!0,minValue:1,maxValue:5},disabled:!1,touched:!1,valid:!1}}),H=Object(l.a)(D,2),W=H[0],z=H[1],K=function(e,t){var a=!0;return!e||(e.required&&(a=""!==t.trim()&&a),e.minValue&&e.maxValue&&(a=parseInt(t)>=e.minValue&&parseInt(t)<=e.maxValue&&a),a)},P=Object(o.useState)(!1),$=Object(l.a)(P,2),G=$[0],Q=$[1],X=Object(o.useState)(!1),Z=Object(l.a)(X,2),ee=Z[0],te=Z[1],ae=function(e,t){var a=[];for(var n in e)a.push(e[n].valid);a.includes(!1)?t(!1):t(!0)};Object(o.useEffect)((function(){ae(A,Q)}),[A]),Object(o.useEffect)((function(){ae(W,te)}),[W]);var ne=Object(o.useState)("agencyReview"),re=Object(l.a)(ne,2),ie=re[0],le=re[1],oe=[];for(var ce in A)oe.push({id:ce,config:A[ce]});var ue=[];for(var se in W)ue.push({id:se,config:W[se]});var de,be,ve,je=function(e,t){return e.map((function(e){var a=e.id,i=e.config,l=i.elementType,o=i.elementConfig,c=i.value,u=i.defaultValue,s=i.disabled,d=i.touched,v=i.valid,j=i.validation;return Object(O.jsx)(b.a,{elementType:l,elementConfig:o,value:c,defaultValue:u,disabledInfo:s,shouldValidate:j.required,inputTouched:d,inputValid:v,inputChanged:function(e){return t(e,a)},inputUnfocused:function(){return function(e){"agencyReview"===ie&&J((function(t){return Object(r.a)(Object(r.a)({},t),{},Object(n.a)({},e,Object(r.a)(Object(r.a)({},t[e]),{},{touched:!0})))})),"tourReview"===ie&&z((function(t){return Object(r.a)(Object(r.a)({},t),{},Object(n.a)({},e,Object(r.a)(Object(r.a)({},t[e]),{},{touched:!0})))}))}(a)}},a)}))};"agencyReview"===ie?(de=je(oe,(function(e,t){J((function(a){return Object(r.a)(Object(r.a)({},a),{},Object(n.a)({},t,Object(r.a)(Object(r.a)({},a[t]),{},{value:e.target.value,touched:!0,valid:K(a[t].validation,e.target.value)})))}))})),be=G,ve="Review agency"):"tourReview"===ie&&(de=je(ue,(function(e,t){z((function(a){return Object(r.a)(Object(r.a)({},a),{},Object(n.a)({},t,Object(r.a)(Object(r.a)({},a[t]),{},{value:e.target.value,touched:!0,valid:K(a[t].validation,e.target.value)})))}))})),be=ee,ve="Review selected tour");var me=function(e,t){var a=Object(r.a)({},e);for(var n in a)a[n].value="",a[n].touched=!1,"travel2"!==n&&"travel3"!==n&&(a[n].valid=!1);t(a)};Object(o.useEffect)((function(){(null!==I||k)&&q()}),[I,k,q]);var fe=Object(O.jsx)(d.a,{formClassname:"leave-review",signUpButtonShown:null,formIsValid:be,formBtnText:"leave review",formSubmitHandler:function(e){if(e.preventDefault(),"agencyReview"!==ie||C)if("agencyReview"===ie&&C)M(!0);else{var n={name:W.name.value,job:W.job.value,tour:W.travel.value,review:W.reviewText.value,rating:W.rating.value,userId:a};F(n,ie,t),me(W,z)}else{var r={name:A.name.value,job:A.job.value,tours:[A.travel1.value,A.travel2.value,A.travel3.value],review:A.reviewText.value,rating:A.rating.value,userId:a};F(r,ie,t),me(A,J)}V()},children:de});return null===t&&(fe=Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("p",{style:{textAlign:"center",fontSize:"2rem",marginTop:"2rem"},children:"Sign up or Log in to leave review"}),Object(O.jsx)(c.b,{to:"/signup",style:{fontSize:"1.9rem",textTransform:"uppercase",width:"10rem",margin:"2rem auto",padding:"0.7rem 0",backgroundColor:"orange",color:"white",textAlign:"center"},children:"do it"})]})),E&&(fe=Object(O.jsx)(v.a,{})),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m.a,{redirectModalShow:S,redirectModalTitle:"Review sent succesfully",redirectModalClosed:function(){g(t,a),q()}}),Object(O.jsx)(j.a,{errorModalShow:null!==I||k,errorModalClosed:null!==I?function(){return e(p.q())}:function(){return M(!1)},errorModalMsg:I?"Can't send review. Try again later, or try refreshing the page.":"You already reviewed our agency. To add new review, delete the existing one in Your Page."}),Object(O.jsx)(u.a,{titleClassname:"leave-review",icon:Object(O.jsx)(s.b,{}),titleText:"add your review",titleAdditional:"be gentle"}),Object(O.jsxs)("section",{className:"leave-review__content",children:[Object(O.jsxs)("p",{className:"leave-review__text",children:["Fill all the fields and leave your review.",Object(O.jsx)("br",{}),Object(O.jsx)("span",{style:{color:"red"},children:"NOTE: "}),"You can only add one review about our tour agency, but you can, off course delete it and add new one, or edit the existing one.",Object(O.jsx)("br",{}),"For individual travels you can add one review for each."]}),Object(O.jsxs)("article",{className:"leave-review__form",children:[Object(O.jsx)("h3",{className:"leave-review__form-title",style:{display:t?"block":"none"},children:ve}),fe,Object(O.jsx)("button",{className:"leave-review__switch-btn",style:{display:t?"block":"none"},onClick:function(){"agencyReview"===ie?le("tourReview"):"tourReview"===ie&&le("agencyReview")},children:"agencyReview"===ie?"switch to review single tour":"switch to review our agency"})]})]})]})}}}]);
//# sourceMappingURL=4.b2241f7b.chunk.js.map