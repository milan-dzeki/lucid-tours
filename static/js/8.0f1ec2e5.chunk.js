(this["webpackJsonptour-agency-react"]=this["webpackJsonptour-agency-react"]||[]).push([[8],{123:function(e,t,r){"use strict";r(2),r(124),r(42);var n=r(23),s=r(30),o=r(1);t.a=function(e){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(n.a,{show:e.errorModalShow,backdropClicked:e.errorModalClosed}),Object(o.jsx)(s.a,{mountOnEnter:!0,unmountOnExit:!0,in:e.errorModalShow,timeout:300,classNames:"show",children:Object(o.jsxs)("div",{className:"error-modal",children:[Object(o.jsx)("p",{className:"error-modal__title",children:"Error occured"}),Object(o.jsx)("p",{className:"error-modal__message",children:e.errorModalMsg}),Object(o.jsx)("button",{type:"button",className:"error-modal__btn",onClick:e.errorModalClosed,children:"OK"})]})})]})}},124:function(e,t,r){},125:function(e,t,r){"use strict";r(2),r(126);var n=r(1);t.a=function(){return Object(n.jsx)("div",{className:"spinner",children:"loading..."})}},126:function(e,t,r){},152:function(e,t,r){},153:function(e,t,r){},154:function(e,t,r){},156:function(e,t,r){},171:function(e,t,r){"use strict";r.r(t);var n=r(16),s=r(2),o=r.n(s),i=(r(152),r(43)),c=(r(153),r(1)),u=function(e){return Object(c.jsxs)("div",{className:"single-tour-booked",children:[Object(c.jsxs)("div",{className:"single-tour-booked__title",children:[Object(c.jsx)("div",{className:"single-tour-booked__title-icon",children:e.tourIcon}),Object(c.jsx)("p",{className:"single-tour-booked__title-continent",children:e.tourContinent})]}),Object(c.jsxs)("div",{className:"single-tour-booked__info",children:[Object(c.jsxs)("div",{className:"single-tour-booked__info-text",children:[Object(c.jsxs)("p",{children:[Object(c.jsx)("span",{children:"State: "}),e.tourState]}),Object(c.jsx)("p",{children:Object(c.jsx)("span",{children:"Cities you visited:"})}),Object(c.jsx)("ul",{children:e.tourCities.map((function(e,t){return Object(c.jsxs)("li",{children:[" - ",e]},t)}))}),Object(c.jsxs)("p",{children:[Object(c.jsx)("span",{children:"price payed:"})," $",e.tourPrice]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("span",{children:"discounts: "}),e.tourDiscount||"none"]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("span",{children:"days stayed:"})," ",e.tourDays]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("span",{children:"visit period:"})," ",e.tourDate]}),"with"===e.tourMeditation&&Object(c.jsxs)("p",{children:[Object(c.jsx)("span",{children:"parcipitates in meditation: "}),e.tourMeditationParticipation]})]}),Object(c.jsx)("div",{className:"single-tour-booked__info-img",style:{backgroundImage:"url(".concat(e.tourImg,")")}})]}),Object(c.jsx)("button",{className:"single-tour-booked__delete-btn",onClick:e.tourPrepareDelete,children:e.tourDelBtnText})]})},l=o.a.memo(u),a=(r(154),r(155)),j=r.n(a),d=function(e){return Object(c.jsxs)("div",{className:"requested-tour",children:[Object(c.jsx)("h3",{className:"requested-tour__title",children:"You requested:"}),Object(c.jsxs)("div",{className:"requested-tour__flex",children:[Object(c.jsxs)("div",{className:"requested-tour__content",children:[Object(c.jsxs)("div",{className:"requested-tour__info",children:[Object(c.jsxs)("p",{children:[Object(c.jsx)("span",{children:"Country: "}),e.countryCountry]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("span",{children:"State: "}),e.countryState]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("span",{children:"City: "}),e.countryCity]})]}),Object(c.jsx)("div",{className:"requested-tour__flag",children:Object(c.jsx)(j.a,{code:e.countryCode})})]}),Object(c.jsx)("button",{className:"requested-tour__delete",onClick:e.deleteQuestion,children:"delete request"})]})]})},b=o.a.memo(d),h=(r(156),function(e){return Object(c.jsxs)("div",{className:"your-review your-review__".concat(e.yourReviewClassname),children:[Object(c.jsx)("h3",{className:"your-review__title",children:e.yourReviewTitle}),Object(c.jsxs)("div",{className:"your-review__data",children:[Object(c.jsxs)("p",{className:"your-review__data-item",children:[Object(c.jsx)("span",{children:"Chosen Name: "}),e.yourReviewName]}),Object(c.jsxs)("p",{className:"your-review__data-item",children:[Object(c.jsx)("span",{children:"Job: "}),e.yourReviewJob]}),Object(c.jsx)("p",{className:"your-review__data-item",children:Object(c.jsx)("span",{children:"You visited:"})}),Object(c.jsx)("ul",{className:"your-review__data-list",children:"agency"===e.yourReviewClassname&&e.yourReviewTours?e.yourReviewTours.map((function(e,t){return Object(c.jsxs)("li",{style:{display:""===e?"none":"block"},children:["- ",e.toUpperCase()]},t)})):Object(c.jsx)("li",{children:e.yourReviewTours.toUpperCase()})}),Object(c.jsxs)("p",{className:"your-review__data-item",children:[Object(c.jsx)("span",{children:"Your review: "}),e.yourReviewText]}),Object(c.jsxs)("p",{className:"your-review__data-item",children:[Object(c.jsx)("span",{children:"Rated: "}),e.yourReviewRating,"/5"]})]}),Object(c.jsx)("button",{className:"your-review__remove-btn",onClick:e.deleteReviewQuestion,children:"remove review"})]})}),y=o.a.memo(h),O=r(125),x=r(46),m=r(123),g=r(21),p=r(24),_=r(15),v=r(31),f=r(47);t.default=function(){var e=Object(_.c)((function(e){return e.auth.token})),t=Object(_.c)((function(e){return e.auth.userID})),r=Object(f.a)(),o=r.questionModalData,u=r.showQuestionModal,a=r.closeQuestionModal,j=Object(_.b)(),d=Object(_.c)((function(e){return e.auth.loading})),h=Object(_.c)((function(e){return e.auth.error})),w=Object(s.useCallback)((function(e,t){return j(v.o(e,t))}),[j]),N=Object(_.c)((function(e){return e.toursFetching.loading})),T=Object(_.c)((function(e){return e.toursFetching.error})),C=Object(_.c)((function(e){return e.toursFetching.deleteError})),R=Object(s.useCallback)((function(e,t){return j(v.n(e,t))}),[j]),k=Object(_.c)((function(e){return e.requestTour.loading})),q=Object(_.c)((function(e){return e.requestTour.deleteError})),M=Object(_.c)((function(e){return e.requestTour.fetchError})),S=Object(s.useCallback)((function(e,t){return j(v.l(e,t))}),[j]),A=Object(s.useCallback)((function(e,t){return j(v.k(e,t))}),[j]),D=Object(s.useCallback)((function(e,t){return j(v.m(e,t))}),[j]);Object(s.useEffect)((function(){R(e,t),S(e,t),A(e,t),D(e,t),w(e,t)}),[R,S,A,D,w,e,t]);var F=Object(_.c)((function(e){return e.auth.userInfo})),E=Object(_.c)((function(e){return e.toursFetching.pastTours})),P=Object(_.c)((function(e){return e.toursFetching.presentTours})),I=Object(_.c)((function(e){return e.toursFetching.futureTours})),Q=Object(_.c)((function(e){return e.reviews.agencyReview})),B=Object(_.c)((function(e){return e.reviews.tourReviews})),J=Object(_.c)((function(e){return e.reviews.fetchAgencyReviewLoading})),z=Object(_.c)((function(e){return e.reviews.fetchTourReviewsLoading})),Y=Object(_.c)((function(e){return e.reviews.fetchAgencyRevewError})),U=Object(_.c)((function(e){return e.reviews.fetchTourReviewsError})),H=(Object(_.c)((function(e){return e.reviews.deleteReviewError})),function(e,t){return j(v.s(e,t))}),L=function(e,t){return j(v.t(e,t))},K=Object(_.c)((function(e){return e.requestTour.requestedTours})),W=Object(s.useState)(""),$=Object(n.a)(W,2),G=$[0],V=$[1],X=function(e,t){return j(v.w(e,t))},Z=function(e){return j(v.x(e))},ee=Object(s.useState)(null),te=Object(n.a)(ee,2),re=te[0],ne=te[1],se=function(e,t){return j(v.j(e,t))},oe=Object(s.useState)(null),ie=Object(n.a)(oe,2),ce=ie[0],ue=ie[1],le=function(e,t,r){return j(v.i(e,t,r))},ae=Object(s.useState)(""),je=Object(n.a)(ae,2),de=je[0],be=je[1],he=Object(s.useState)(null),ye=Object(n.a)(he,2),Oe=ye[0],xe=ye[1],me=Object(s.useState)(null),ge=Object(n.a)(me,2),pe=ge[0],_e=ge[1],ve=Object(s.useState)(null),fe=Object(n.a)(ve,2),we=fe[0],Ne=fe[1],Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null!==t&&null===e&&Ne(t),null===t&&null!==e&&_e(e),u("deleting review","Are you sure you want to delete this review?")},Ce=function(e){return e.map((function(t){return Object(c.jsx)(l,{tourIcon:t.displayIcon,tourContinent:t.continent,tourState:t.state,tourCities:t.cities,tourImg:t.displayImg,tourPrice:t.price,tourDays:t.days,tourDate:t.tourDate,tourMeditation:t.meditation,tourMeditationParticipation:t.meditationParticipation,tourDiscount:t.discount,tourDelBtnText:e===I?"cancel this tour":"remove from history",tourPrepareDelete:function(){return function(e,t){var r,n;"past"===t||"present"===t?(r="removing tour from history",n="Are you sure you want to remove this tour from history? Beware that if you do that, you won't get discounts while booking via website for future tours, since our dicounts system rellies of your touring history. To get discounts, you will need to call us directly."):"future"===t&&(r="cancelling tour",n="Are you sure you want to cancel this tour?"),u(r,n),ue(e)}(t.id,t.status)}},t.id)}))},Re=Object(c.jsx)("p",{style:{textAlign:"center",fontSize:"2rem",textTransform:"uppercase"},children:"no tours yet"}),ke=Object(c.jsx)("p",{style:{textAlign:"center",fontSize:"2rem",textTransform:"uppercase",color:"red"},children:"can't load tours. try refreshing the page, or try again latter"}),qe=function(e,t){var r=Ce(e);return e&&0!==e.length&&(r=Ce(e)),0===e.length&&(r=Re),N&&(r=Object(c.jsx)(O.a,{})),T&&(r=ke),Object(c.jsxs)("div",{className:"your-page__tours-section",children:[Object(c.jsx)("h3",{children:t}),Object(c.jsx)("div",{className:N||0===e.length||null!==T?"your-page__tours-toursbox tourbox-disp-block":"your-page__tours-toursbox",children:r}),Object(c.jsx)("button",{className:"your-page__clear-all-btn",style:{display:0===e.length?"none":"block"},onClick:function(){return function(e){var t,r;xe(e),e===E?(t="clearing past touring history",r="Are you sure you want to clear all past touring history? Beware that if you do that, you won't get discounts while booking via website for future tours, since our dicounts system rellies of your touring history. To get discounts, you will need to call us directly."):e===P?(t="clearing present touring history",r="Are you sure you want to clear all present touring history? Beware that if you do that, you won't get discounts while booking via website for future tours, since our dicounts system rellies of your touring history. To get discounts, you will need to call us directly."):e===I&&(t="cancelling all booked tours",r="Are you sure you want to cancel all of your booked tours?"),be(e[0].status),V("bookedTours"),u(t,r)}(e)},children:e===I?"cancel all booked tours":"clear all tours"})]})},Me=K.map((function(e){return Object(c.jsx)(b,{countryCode:e.code,countryCountry:e.country,countryState:""===e.state?"---":e.state,countryCity:""===e.city?"---":e.city,deleteQuestion:function(){return t=e.id,u("cancelling request","Are you sure you want to cancel this request?"),void ne(t);var t}},e.id)}));k&&(Me=Object(c.jsx)(O.a,{})),0===K.length&&(Me=Re),M&&(Me=ke);var Se,Ae,De,Fe=Object(c.jsx)("p",{style:{textAlign:"center",fontSize:"2rem",textTransform:"uppercase"},children:"no reviews yet"}),Ee=Object(c.jsx)("p",{style:{textAlign:"center",fontSize:"2rem",textTransform:"uppercase",color:"red"},children:"can't load reviews. try refreshing the page, or try again latter"});return null!==Q&&(Se=Object(c.jsx)(y,{yourReviewClassname:"agency",yourReviewTitle:"your opinion of us",yourReviewName:Q.name,yourReviewJob:Q.job,yourReviewTours:Q.tours,yourReviewText:Q.review,yourReviewRating:Q.rating,deleteReviewQuestion:function(){return Te("agencyRev",null)}})),J&&(Se=Object(c.jsx)(O.a,{})),null===Q&&(Se=Fe),Y&&(Se=Ee),B&&(Ae=B.map((function(e){return Object(c.jsx)(y,{yourReviewClassname:"tours",yourReviewTitle:"single tour review",yourReviewName:e.name,yourReviewJob:e.job,yourReviewTours:e.tour,yourReviewText:e.review,yourReviewRating:e.rating,deleteReviewQuestion:function(){return Te(null,e.id)}},e.id)}))),0===B.length&&(Ae=Fe),z&&(Ae=Object(c.jsx)(O.a,{})),U&&(Ae=Ee),null!==F&&(De=Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("ul",{className:"your-page__user-info-list",children:[Object(c.jsxs)("li",{className:"your-page__user-info-item",children:[Object(c.jsx)("span",{children:"Full name: "}),F.firstName," ",F.lastName]}),Object(c.jsxs)("li",{className:"your-page__user-info-item",children:[Object(c.jsx)("span",{children:"Email: "}),F.email]}),Object(c.jsxs)("li",{className:"your-page__user-info-item",children:[Object(c.jsx)("span",{children:"Country: "}),F.country]}),Object(c.jsxs)("li",{className:"your-page__user-info-item",children:[Object(c.jsx)("span",{children:"City: "}),F.city]}),Object(c.jsxs)("li",{className:"your-page__user-info-item",children:[Object(c.jsx)("span",{children:"Phone: "}),F.phone]})]})})),F||(De=Object(c.jsx)("p",{children:"no info to show"})),d&&(De=Object(c.jsx)(O.a,{})),h&&(De=Object(c.jsx)("p",{style:{textAlign:"center",fontSize:"2rem",textTransform:"uppercase",color:"red",marginBottom:"2rem"},children:"your info should be here, but it can't be loaded right now. try refreshing the page"})),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(i.a,{titleClassname:"your-page",icon:Object(c.jsx)(g.g,{}),titleText:"your page",titleAdditional:"all your activities"}),Object(c.jsx)(x.a,{questionModalShow:o.show,questionModalTitle:o.title,questionModalText:o.text,questionModalCancel:function(){ne(null),ue(null),V(""),a(),be(""),_e(null),Ne(null),xe(null)},questionModalConfirm:function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;null!==t&&null===r&&""===G&&null===o&&null===i?X(t,e):null===t&&null!==r&&""===G&&null===o&&null===i?se(r,e):null===t&&null===r&&"reqTours"===G&&null===o&&null===i?Z(e):null===t&&null===r&&"bookedTours"===G&&null===o&&null===i?le(n,s,e):null===t&&null===r&&""===G&&"agencyRev"===o&&null===i?H(null,e):null===t&&null===r&&""===G&&null===o&&null!==i&&L(i,e),ne(null),ue(null),V(""),a(),be(""),_e(null),Ne(null),xe(null)}(re,ce,de,Oe,pe,we)}}),Object(c.jsx)(m.a,{errorModalShow:null!==q||null!==C,errorModalMsg:null!==q||null!==C?"Can't perform action at the moment. Try later.":null,errorModalClosed:null!==q?function(){return j(v.h())}:function(){return j(v.f())}}),Object(c.jsxs)("section",{className:"your-page__content",children:[Object(c.jsxs)("p",{className:"your-page__text",children:["Hello ",null!==F?Object(c.jsx)("span",{style:{fontWeight:"bold",color:"red"},children:F.firstName}):"user","! This is your personal page. Here you can find all your activities on our website. Your touring history is here - your past, present and future tours. Also, here you can find the tours the you have requested, if you requested any. Plus, if you left reviews, you can find them here."]}),Object(c.jsxs)("article",{className:"your-page__user-info",children:[Object(c.jsxs)("div",{className:"your-page__tours-title",children:[Object(c.jsx)(g.f,{className:"your-page__tours-title__icon"}),Object(c.jsx)("p",{className:"your-page__tours-title__text",children:"your info"})]}),De]}),Object(c.jsxs)("article",{className:"your-page__tours",children:[Object(c.jsxs)("div",{className:"your-page__tours-title",children:[Object(c.jsx)(g.c,{className:"your-page__tours-title__icon"}),Object(c.jsx)("p",{className:"your-page__tours-title__text",children:"your touring history"})]}),Object(c.jsx)(c.Fragment,{children:qe(E,"Past Tours")}),Object(c.jsx)(c.Fragment,{children:qe(P,"Current Tours")}),Object(c.jsx)(c.Fragment,{children:qe(I,"Upcoming Tours")})]}),Object(c.jsxs)("article",{className:"your-page__requests",children:[Object(c.jsxs)("div",{className:"your-page__tours-title",children:[Object(c.jsx)(p.e,{className:"your-page__tours-title__icon"}),Object(c.jsx)("p",{className:"your-page__tours-title__text",children:"tours you requested"})]}),Object(c.jsxs)("div",{className:k||0===K.length||null!==M?"your-page__requests-tours tourbox-disp-block":"your-page__requests-tours",children:[Me,Object(c.jsx)("button",{className:"your-page__clear-all-btn",style:{display:0===K.length||null!==M?"none":"block"},onClick:function(){V("reqTours"),u("deleting all requests","Are you sure you want to delete all your requested tours?")},children:"delete all requests"})]})]}),Object(c.jsxs)("article",{className:"your-page__reviews",children:[Object(c.jsxs)("div",{className:"your-page__tours-title",children:[Object(c.jsx)(p.e,{className:"your-page__tours-title__icon"}),Object(c.jsx)("p",{className:"your-page__tours-title__text",children:"your reviews"})]}),Object(c.jsx)("div",{className:"your-page__reviews-reviews your-page__reviews-reviews--agency",children:Object(c.jsxs)("div",{className:"your-page__reviews-reviews__agency",children:[Object(c.jsx)("h3",{className:"your-page__reviews-reviews__title",children:"Agency review"}),Se]})}),Object(c.jsx)("div",{className:"your-page__reviews-reviews your-page__reviews-reviews--tours",children:Object(c.jsxs)("div",{className:"your-page__reviews-reviews__agency",children:[Object(c.jsx)("h3",{className:"your-page__reviews-reviews__title",children:"Tours Reviews"}),Object(c.jsx)("div",{className:"reviews-tours-box",children:Ae})]})})]})]})]})}}}]);
//# sourceMappingURL=8.0f1ec2e5.chunk.js.map